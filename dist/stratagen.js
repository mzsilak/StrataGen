!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=5)}([function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n};Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=t.deserialize=t.Serializable=t.JsonProperty=void 0,r(2);var o,a="api:map:";function s(e,t){var r={};return e.forEach((function(e){r=n(n({},r),Reflect.getMetadata(""+a+e,t))})),r}function u(e,t){var r;if([null,void 0].includes(e))return e;if(void 0===t)return f(typeof e,e);var i=new t,c=i.constructor.name,h=null!==(r=Reflect.getMetadata("api:map:serializable",t))&&void 0!==r?r:{},d=h.baseClassNames,p=h.options,y=""+a+c,g=Reflect.hasMetadata(y,i),_={};return g||d&&d.length?(_=Reflect.getMetadata(y,i),d&&d.length&&(_=n(n({},s(d,i)),_)),Object.keys(_).forEach((function(t){var r=function(e,t,r,n,i){var a;if([null,void 0].includes(n))return n;if("names"in r){var s={};r.names.forEach((function(e){return s[e]=n[e]})),a=s}else if("name"in r&&!r.isNameOverridden&&i){var c=i(r.name);a=n[c]}else a=n[r.name];if([null,void 0].includes(a))return a;var h,d=Reflect.getMetadata("design:type",e,t),p=!!d.name&&d.name.toLowerCase()===o.Array,y=r.isDictionary,g=r.predicate,_=r.onDeserialize,v=r.postDeserialize,m=r.type||d,w=l(m);_&&(a=_(a,e));if(y){var b={};typeof a!==o.Object?(console.error("Type '"+typeof a+"' is not assignable to type 'Dictionary' for property '"+t+"' in '"+e.constructor.name+"'.\n","Received: "+JSON.stringify(a)),h=void 0):(Object.keys(a).forEach((function(r){w||g?(g&&(m=g(a[r])),b[r]=u(a[r],m)):b[r]=f(typeof a[r],a[r],t,e.constructor.name)})),h=b)}else if(p){var k=[];Array.isArray(a)?(a.forEach((function(r){w||g?(g&&(m=g(r)),k.push(u(r,m))):k.push(f(typeof r,r,t,e.constructor.name))})),h=k):(console.error("Type '"+typeof a+"' is not assignable to type 'Array' for property '"+t+"' in '"+e.constructor.name+"'.\n","Received: "+JSON.stringify(a)),h=void 0)}else w||g?(m=g?g(a):m,h=u(a,m)):h=f(m.name,a,t,e.constructor.name);v&&(h=v(h,e));return h}(i,t,_[t],e,null==p?void 0:p.formatPropertyNames);void 0!==r&&(i[t]=r)})),i):i}function c(e,t){var r;if(void 0===t&&(t=!0),[void 0,null].includes(e)||typeof e!==o.Object)return e;var i=e.constructor.name,u=""+a+i,f=null!==(r=Reflect.getMetadata("api:map:serializable",e.constructor))&&void 0!==r?r:{},h=f.baseClassNames,d=f.options,p=h&&h.length,y=Reflect.hasMetadata(u,e),g={};if(!y&&!p)return e;g=Reflect.getMetadata(u,e),p&&(g=n(n({},s(h,e)),g));var _={},v=Object.keys(e);return Object.keys(g).forEach((function(r){var n=g[r].onSerialize;if(v.includes(r)){var i=g[r],a=function(e,t,r,n){var i=e[t],a=Reflect.getMetadata("design:type",e,t),s=!!a.name&&a.name.toLocaleLowerCase()===o.Array,u=r.predicate,f=r.type||a,h=l(f);if(i&&(h||u)){if(s){var d=[];return i.forEach((function(e){d.push(c(e,n))})),d}if(r.isDictionary){var p={};return Object.keys(i).forEach((function(e){p[e]=c(i[e],n)})),p}return c(i,n)}if(f.name.toLocaleLowerCase()===o.Date)return i?i.toISOString():i;return i}(e,r,i,t);if(n&&(a=n(a,e)),i.names)i.names.forEach((function(e){(!t||t&&void 0!==a[e])&&(_[e]=a[e])}));else if(!t||t&&void 0!==a)if(!i.isNameOverridden&&(null==d?void 0:d.formatPropertyNames)){var s=d.formatPropertyNames(i.name);_[s]=a}else _[i.name]=a}})),_}function l(e){return Reflect.hasOwnMetadata("api:map:serializable",e)}function f(e,t,r,n){if(null==e)return t;if(e=e.toLowerCase(),(typeof t).toLowerCase()===e)return t;var i=function(){console.error("Type '"+typeof t+"' is not assignable to type '"+e+"' for property '"+r+"' in '"+n+"'.\n","Received: "+JSON.stringify(t))};switch(e){case o.String:var a=t.toString();return"[object Object]"===a?void i():a;case o.Number:var s=+t;return isNaN(s)?void i():s;case o.Boolean:return void i();case o.Date:return isNaN(Date.parse(t))?void i():new Date(t);default:return t}}!function(e){e.Array="array",e.Boolean="boolean",e.Date="date",e.Number="number",e.Object="object",e.String="string"}(o||(o={})),t.JsonProperty=function(e){return function(t,r,i){if(void 0===r&&t.prototype){var s=Reflect.getMetadata("design:paramtypes",t)[i];r=function(e){var t=e.toString().replace(/(\/\*[\s\S]*?\*\/|\/\/.*$)/gm,"").replace(/[\r\t\n\v\f]/g,"").replace(/( +)/g," "),r=/(?:this\.)([^\n\r\t\f\v;]+)([\s;])/gm,n=new Map,i=/(?:.*(?:constructor|function).*?(?=\())(?:\()(.+?(?=\)))/m.exec(t);if(!i||!i.length)return n;for(var o,a=i[1].replace(/ /g,"").split(","),s=function(){var e=o[1].replace(/ /g,"").split("="),t=a.findIndex((function(t){return t===e[1]}));t>-1&&n.set(t,e[0])};o=r.exec(t);)s();return n}(t.prototype.constructor).get(i),t=t.prototype,Reflect.defineMetadata("design:type",s,t,r)}var u={},c=t.constructor.name,l=""+a+c;Reflect.hasMetadata(l,t)&&(u=Reflect.getMetadata(l,t)),u[r]=function(e,t){if(!t)return{name:e.toString(),isDictionary:!1,isNameOverridden:!1};var r;r=typeof t===o.String?{name:t,isNameOverridden:!0}:t.name?{name:t.name,isNameOverridden:!0}:t.names&&t.names.length?{names:t.names}:{name:e.toString(),isNameOverridden:!1};return t.predicate?n(n({},r),{predicate:t.predicate,onDeserialize:t.onDeserialize,onSerialize:t.onSerialize,postDeserialize:t.postDeserialize,isDictionary:!!t.isDictionary}):n(n({},r),{type:t.type,onDeserialize:t.onDeserialize,onSerialize:t.onSerialize,postDeserialize:t.postDeserialize,isDictionary:!!t.isDictionary})}(r,e),Reflect.defineMetadata(l,u,t)}},t.Serializable=function(e){return function(t){var r=function e(t){var r=Reflect.getPrototypeOf(t);return r&&r.name?i(e(r),[r.name]):[]}(t);Reflect.defineMetadata("api:map:serializable",{baseClassNames:r,options:e},t)}},t.deserialize=u,t.serialize=c},function(e,t,r){var n,i,o;
/* @license
Papa Parse
v5.3.1
https://github.com/mholt/PapaParse
License: MIT
*/i=[],void 0===(o="function"==typeof(n=function e(){"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},r=!t.document&&!!t.postMessage,n=r&&/blob:/i.test((t.location||{}).protocol),i={},o=0,a={parse:function(r,n){var s=(n=n||{}).dynamicTyping||!1;if(b(s)&&(n.dynamicTypingFunction=s,s={}),n.dynamicTyping=s,n.transform=!!b(n.transform)&&n.transform,n.worker&&a.WORKERS_SUPPORTED){var u=function(){if(!a.WORKERS_SUPPORTED)return!1;var r,n,s=(r=t.URL||t.webkitURL||null,n=e.toString(),a.BLOB_URL||(a.BLOB_URL=r.createObjectURL(new Blob(["(",n,")();"],{type:"text/javascript"})))),u=new t.Worker(s);return u.onmessage=g,u.id=o++,i[u.id]=u}();return u.userStep=n.step,u.userChunk=n.chunk,u.userComplete=n.complete,u.userError=n.error,n.step=b(n.step),n.chunk=b(n.chunk),n.complete=b(n.complete),n.error=b(n.error),delete n.worker,void u.postMessage({input:r,config:n,workerId:u.id})}var d=null;return a.NODE_STREAM_INPUT,"string"==typeof r?d=n.download?new c(n):new f(n):!0===r.readable&&b(r.read)&&b(r.on)?d=new h(n):(t.File&&r instanceof File||r instanceof Object)&&(d=new l(n)),d.stream(r)},unparse:function(e,t){var r=!1,n=!0,i=",",o="\r\n",s='"',u=s+s,c=!1,l=null,f=!1;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||a.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(i=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(r=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(c=t.skipEmptyLines),"string"==typeof t.newline&&(o=t.newline),"string"==typeof t.quoteChar&&(s=t.quoteChar),"boolean"==typeof t.header&&(n=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");l=t.columns}void 0!==t.escapeChar&&(u=t.escapeChar+s),"boolean"==typeof t.escapeFormulae&&(f=t.escapeFormulae)}}();var h=new RegExp(p(s),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return d(null,e,c);if("object"==typeof e[0])return d(l||Object.keys(e[0]),e,c)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),d(e.fields||[],e.data||[],c);throw new Error("Unable to serialize unrecognized input");function d(e,t,r){var a="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var s=Array.isArray(e)&&0<e.length,u=!Array.isArray(t[0]);if(s&&n){for(var c=0;c<e.length;c++)0<c&&(a+=i),a+=y(e[c],c);0<t.length&&(a+=o)}for(var l=0;l<t.length;l++){var f=s?e.length:t[l].length,h=!1,d=s?0===Object.keys(t[l]).length:0===t[l].length;if(r&&!s&&(h="greedy"===r?""===t[l].join("").trim():1===t[l].length&&0===t[l][0].length),"greedy"===r&&s){for(var p=[],g=0;g<f;g++){var _=u?e[g]:g;p.push(t[l][_])}h=""===p.join("").trim()}if(!h){for(var v=0;v<f;v++){0<v&&!d&&(a+=i);var m=s&&u?e[v]:v;a+=y(t[l][m],v)}l<t.length-1&&(!r||0<f&&!d)&&(a+=o)}}return a}function y(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);!0===f&&"string"==typeof e&&null!==e.match(/^[=+\-@].*$/)&&(e="'"+e);var n=e.toString().replace(h,u);return"boolean"==typeof r&&r||"function"==typeof r&&r(e,t)||Array.isArray(r)&&r[t]||function(e,t){for(var r=0;r<t.length;r++)if(-1<e.indexOf(t[r]))return!0;return!1}(n,a.BAD_DELIMITERS)||-1<n.indexOf(i)||" "===n.charAt(0)||" "===n.charAt(n.length-1)?s+n+s:n}}};if(a.RECORD_SEP=String.fromCharCode(30),a.UNIT_SEP=String.fromCharCode(31),a.BYTE_ORDER_MARK="\ufeff",a.BAD_DELIMITERS=["\r","\n",'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!r&&!!t.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=y,a.ParserHandle=d,a.NetworkStreamer=c,a.FileStreamer=l,a.StringStreamer=f,a.ReadableStreamStreamer=h,t.jQuery){var s=t.jQuery;s.fn.parse=function(e){var r=e.config||{},n=[];return this.each((function(e){if("INPUT"!==s(this).prop("tagName").toUpperCase()||"file"!==s(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)n.push({file:this.files[i],inputElem:this,instanceConfig:s.extend({},r)})})),i(),this;function i(){if(0!==n.length){var t,r,i,u=n[0];if(b(e.before)){var c=e.before(u.file,u.inputElem);if("object"==typeof c){if("abort"===c.action)return t=u.file,r=u.inputElem,i=c.reason,void(b(e.error)&&e.error({name:"AbortError"},t,r,i));if("skip"===c.action)return void o();"object"==typeof c.config&&(u.instanceConfig=s.extend(u.instanceConfig,c.config))}else if("skip"===c)return void o()}var l=u.instanceConfig.complete;u.instanceConfig.complete=function(e){b(l)&&l(e,u.file,u.inputElem),o()},a.parse(u.file,u.instanceConfig)}else b(e.complete)&&e.complete()}function o(){n.splice(0,1),i()}}}function u(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=m(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new d(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,r){if(this.isFirstChunk&&b(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(e);void 0!==i&&(e=i)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+e;this._partialLine="";var s=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var u=s.meta.cursor;this._finished||(this._partialLine=o.substring(u-this._baseIndex),this._baseIndex=u),s&&s.data&&(this._rowCount+=s.data.length);var c=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(n)t.postMessage({results:s,workerId:a.WORKER_ID,finished:c});else if(b(this._config.chunk)&&!r){if(this._config.chunk(s,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);s=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(s.data),this._completeResults.errors=this._completeResults.errors.concat(s.errors),this._completeResults.meta=s.meta),this._completed||!c||!b(this._config.complete)||s&&s.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),c||s&&s.meta.paused||this._nextChunk(),s}this._halted=!0},this._sendError=function(e){b(this._config.error)?this._config.error(e):n&&this._config.error&&t.postMessage({workerId:a.WORKER_ID,error:e,finished:!1})}}function c(e){var t;(e=e||{}).chunkSize||(e.chunkSize=a.RemoteChunkSize),u.call(this,e),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),r||(t.onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var n in e)t.setRequestHeader(n,e[n])}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+i)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}r&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader("Content-Range");return null===t?-1:parseInt(t.substring(t.lastIndexOf("/")+1))}(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){var r=t.statusText||e;this._sendError(new Error(r))}}function l(e){var t,r;(e=e||{}).chunkSize||(e.chunkSize=a.LocalChunkSize),u.call(this,e);var n="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,r=e.slice||e.webkitSlice||e.mozSlice,n?((t=new FileReader).onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size);e=r.call(e,this._start,i)}var o=t.readAsText(e,this._config.encoding);n||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function f(e){var t;u.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,r=this._config.chunkSize;return r?(e=t.substring(0,r),t=t.substring(r)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function h(e){u.call(this,e=e||{});var t=[],r=!0,n=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){n&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):r=!0},this._streamData=w((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=w((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=w((function(){this._streamCleanUp(),n=!0,this._streamData("")}),this),this._streamCleanUp=w((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function d(e){var t,r,n,i=Math.pow(2,53),o=-i,s=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,u=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,c=this,l=0,f=0,h=!1,d=!1,g=[],_={data:[],errors:[],meta:{}};if(b(e.step)){var v=e.step;e.step=function(t){if(_=t,O())k();else{if(k(),0===_.data.length)return;l+=t.data.length,e.preview&&l>e.preview?r.abort():(_.data=_.data[0],v(_,c))}}}function w(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function k(){if(_&&n&&(T("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),n=!1),e.skipEmptyLines)for(var t=0;t<_.data.length;t++)w(_.data[t])&&_.data.splice(t--,1);return O()&&function(){if(_)if(Array.isArray(_.data[0])){for(var t=0;O()&&t<_.data.length;t++)_.data[t].forEach(r);_.data.splice(0,1)}else _.data.forEach(r);function r(t,r){b(e.transformHeader)&&(t=e.transformHeader(t,r)),g.push(t)}}(),function(){if(!_||!e.header&&!e.dynamicTyping&&!e.transform)return _;function t(t,r){var n,i=e.header?{}:[];for(n=0;n<t.length;n++){var o=n,a=t[n];e.header&&(o=n>=g.length?"__parsed_extra":g[n]),e.transform&&(a=e.transform(a,o)),a=S(o,a),"__parsed_extra"===o?(i[o]=i[o]||[],i[o].push(a)):i[o]=a}return e.header&&(n>g.length?T("FieldMismatch","TooManyFields","Too many fields: expected "+g.length+" fields but parsed "+n,f+r):n<g.length&&T("FieldMismatch","TooFewFields","Too few fields: expected "+g.length+" fields but parsed "+n,f+r)),i}var r=1;return!_.data.length||Array.isArray(_.data[0])?(_.data=_.data.map(t),r=_.data.length):_.data=t(_.data,0),e.header&&_.meta&&(_.meta.fields=g),f+=r,_}()}function O(){return e.header&&0===g.length}function S(t,r){return n=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[n]&&(e.dynamicTyping[n]=e.dynamicTypingFunction(n)),!0===(e.dynamicTyping[n]||e.dynamicTyping)?"true"===r||"TRUE"===r||"false"!==r&&"FALSE"!==r&&(function(e){if(s.test(e)){var t=parseFloat(e);if(o<t&&t<i)return!0}return!1}(r)?parseFloat(r):u.test(r)?new Date(r):""===r?null:r):r;var n}function T(e,t,r,n){var i={type:e,code:t,message:r};void 0!==n&&(i.row=n),_.errors.push(i)}this.parse=function(i,o,s){var u=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var r=new RegExp(p(t)+"([^]*?)"+p(t),"gm"),n=(e=e.replace(r,"")).split("\r"),i=e.split("\n"),o=1<i.length&&i[0].length<n[0].length;if(1===n.length||o)return"\n";for(var a=0,s=0;s<n.length;s++)"\n"===n[s][0]&&a++;return a>=n.length/2?"\r\n":"\r"}(i,u)),n=!1,e.delimiter)b(e.delimiter)&&(e.delimiter=e.delimiter(i),_.meta.delimiter=e.delimiter);else{var c=function(t,r,n,i,o){var s,u,c,l;o=o||[",","\t","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var f=0;f<o.length;f++){var h=o[f],d=0,p=0,g=0;c=void 0;for(var _=new y({comments:i,delimiter:h,newline:r,preview:10}).parse(t),v=0;v<_.data.length;v++)if(n&&w(_.data[v]))g++;else{var m=_.data[v].length;p+=m,void 0!==c?0<m&&(d+=Math.abs(m-c),c=m):c=m}0<_.data.length&&(p/=_.data.length-g),(void 0===u||d<=u)&&(void 0===l||l<p)&&1.99<p&&(u=d,s=h,l=p)}return{successful:!!(e.delimiter=s),bestDelimiter:s}}(i,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);c.successful?e.delimiter=c.bestDelimiter:(n=!0,e.delimiter=a.DefaultDelimiter),_.meta.delimiter=e.delimiter}var l=m(e);return e.preview&&e.header&&l.preview++,t=i,r=new y(l),_=r.parse(t,o,s),k(),h?{meta:{paused:!0}}:_||{meta:{paused:!1}}},this.paused=function(){return h},this.pause=function(){h=!0,r.abort(),t=b(e.chunk)?"":t.substring(r.getCharIndex())},this.resume=function(){c.streamer._halted?(h=!1,c.streamer.parseChunk(t,!0)):setTimeout(c.resume,3)},this.aborted=function(){return d},this.abort=function(){d=!0,r.abort(),_.meta.aborted=!0,b(e.complete)&&e.complete(_),t=""}}function p(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y(e){var t,r=(e=e||{}).delimiter,n=e.newline,i=e.comments,o=e.step,s=e.preview,u=e.fastMode,c=t=void 0===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(c=e.escapeChar),("string"!=typeof r||-1<a.BAD_DELIMITERS.indexOf(r))&&(r=","),i===r)throw new Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||-1<a.BAD_DELIMITERS.indexOf(i))&&(i=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var l=0,f=!1;this.parse=function(e,a,h){if("string"!=typeof e)throw new Error("Input must be a string");var d=e.length,y=r.length,g=n.length,_=i.length,v=b(o),m=[],w=[],k=[],O=l=0;if(!e)return L();if(u||!1!==u&&-1===e.indexOf(t)){for(var S=e.split(n),T=0;T<S.length;T++){if(k=S[T],l+=k.length,T!==S.length-1)l+=n.length;else if(h)return L();if(!i||k.substring(0,_)!==i){if(v){if(m=[],M(k.split(r)),z(),f)return L()}else M(k.split(r));if(s&&s<=T)return m=m.slice(0,s),L(!0)}}return L()}for(var E=e.indexOf(r,l),C=e.indexOf(n,l),x=new RegExp(p(c)+p(t),"g"),R=e.indexOf(t,l);;)if(e[l]!==t)if(i&&0===k.length&&e.substring(l,l+_)===i){if(-1===C)return L();l=C+g,C=e.indexOf(n,l),E=e.indexOf(r,l)}else if(-1!==E&&(E<C||-1===C))k.push(e.substring(l,E)),l=E+y,E=e.indexOf(r,l);else{if(-1===C)break;if(k.push(e.substring(l,C)),D(C+g),v&&(z(),f))return L();if(s&&m.length>=s)return L(!0)}else for(R=l,l++;;){if(-1===(R=e.indexOf(t,R+1)))return h||w.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:m.length,index:l}),I();if(R===d-1)return I(e.substring(l,R).replace(x,t));if(t!==c||e[R+1]!==c){if(t===c||0===R||e[R-1]!==c){-1!==E&&E<R+1&&(E=e.indexOf(r,R+1)),-1!==C&&C<R+1&&(C=e.indexOf(n,R+1));var P=A(-1===C?E:Math.min(E,C));if(e[R+1+P]===r){k.push(e.substring(l,R).replace(x,t)),e[l=R+1+P+y]!==t&&(R=e.indexOf(t,l)),E=e.indexOf(r,l),C=e.indexOf(n,l);break}var j=A(C);if(e.substring(R+1+j,R+1+j+g)===n){if(k.push(e.substring(l,R).replace(x,t)),D(R+1+j+g),E=e.indexOf(r,l),R=e.indexOf(t,l),v&&(z(),f))return L();if(s&&m.length>=s)return L(!0);break}w.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:m.length,index:l}),R++}}else R++}return I();function M(e){m.push(e),O=l}function A(t){var r=0;if(-1!==t){var n=e.substring(R+1,t);n&&""===n.trim()&&(r=n.length)}return r}function I(t){return h||(void 0===t&&(t=e.substring(l)),k.push(t),l=d,M(k),v&&z()),L()}function D(t){l=t,M(k),k=[],C=e.indexOf(n,l)}function L(e){return{data:m,errors:w,meta:{delimiter:r,linebreak:n,aborted:f,truncated:!!e,cursor:O+(a||0)}}}function z(){o(L()),m=[],w=[]}},this.abort=function(){f=!0},this.getCharIndex=function(){return l}}function g(e){var t=e.data,r=i[t.workerId],n=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var o={abort:function(){n=!0,_(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(b(r.userStep)){for(var a=0;a<t.results.data.length&&(r.userStep({data:t.results.data[a],errors:t.results.errors,meta:t.results.meta},o),!n);a++);delete t.results}else b(r.userChunk)&&(r.userChunk(t.results,o,t.file),delete t.results)}t.finished&&!n&&_(t.workerId,t.results)}function _(e,t){var r=i[e];b(r.userComplete)&&r.userComplete(t),r.terminate(),delete i[e]}function v(){throw new Error("Not implemented.")}function m(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var r in e)t[r]=m(e[r]);return t}function w(e,t){return function(){e.apply(t,arguments)}}function b(e){return"function"==typeof e}return n&&(t.onmessage=function(e){var r=e.data;if(void 0===a.WORKER_ID&&r&&(a.WORKER_ID=r.workerId),"string"==typeof r.input)t.postMessage({workerId:a.WORKER_ID,results:a.parse(r.input,r.config),finished:!0});else if(t.File&&r.input instanceof File||r.input instanceof Object){var n=a.parse(r.input,r.config);n&&t.postMessage({workerId:a.WORKER_ID,results:n,finished:!0})}}),(c.prototype=Object.create(u.prototype)).constructor=c,(l.prototype=Object.create(u.prototype)).constructor=l,(f.prototype=Object.create(f.prototype)).constructor=f,(h.prototype=Object.create(u.prototype)).constructor=h,a})?n.apply(t,i):n)||(e.exports=o)},function(e,t,r){(function(e,t){
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r;!function(r){!function(n){var i="object"==typeof t?t:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=a(r);function a(e,t){return function(r,n){"function"!=typeof e[r]&&Object.defineProperty(e,r,{configurable:!0,writable:!0,value:n}),t&&t(r,n)}}void 0===i.Reflect?i.Reflect=r:o=a(i.Reflect,o),function(t){var r=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,i=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",a="function"==typeof Object.create,s={__proto__:[]}instanceof Array,u=!a&&!s,c={create:a?function(){return A(Object.create(null))}:s?function(){return A({__proto__:null})}:function(){return A({})},has:u?function(e,t){return r.call(e,t)}:function(e,t){return t in e},get:u?function(e,t){return r.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}},l=Object.getPrototypeOf(Function),f="object"==typeof e&&e.env&&"true"===e.env.REFLECT_METADATA_USE_MAP_POLYFILL,h=f||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],r=function(){function e(e,t,r){this._index=0,this._keys=e,this._values=t,this._selector=r}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var r=this._find(e,!0);return this._values[r]=t,this},t.prototype.delete=function(t){var r=this._find(t,!1);if(r>=0){for(var n=this._keys.length,i=r+1;i<n;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new r(this._keys,this._values,n)},t.prototype.values=function(){return new r(this._keys,this._values,i)},t.prototype.entries=function(){return new r(this._keys,this._values,a)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function n(e,t){return e}function i(e,t){return t}function a(e,t){return[e,t]}}():Map,d=f||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new h}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}():Set,p=new(f||"function"!=typeof WeakMap?function(){var e=c.create(),t=n();return function(){function e(){this._key=n()}return e.prototype.has=function(e){var t=i(e,!1);return void 0!==t&&c.has(t,this._key)},e.prototype.get=function(e){var t=i(e,!1);return void 0!==t?c.get(t,this._key):void 0},e.prototype.set=function(e,t){return i(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=i(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=n()},e}();function n(){var t;do{t="@@WeakMap@@"+a()}while(c.has(e,t));return e[t]=!0,t}function i(e,n){if(!r.call(e,t)){if(!n)return;Object.defineProperty(e,t,{value:c.create()})}return e[t]}function o(e,t){for(var r=0;r<t;++r)e[r]=255*Math.random()|0;return e}function a(){var e,t=(e=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):o(new Uint8Array(e),e):o(new Array(e),e));t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var r="",n=0;n<16;++n){var i=t[n];4!==n&&6!==n&&8!==n||(r+="-"),i<16&&(r+="0"),r+=i.toString(16).toLowerCase()}return r}}():WeakMap);function y(e,t,r){var n=p.get(e);if(b(n)){if(!r)return;n=new h,p.set(e,n)}var i=n.get(t);if(b(i)){if(!r)return;i=new h,n.set(t,i)}return i}function g(e,t,r){var n=y(t,r,!1);return!b(n)&&!!n.has(e)}function _(e,t,r){var n=y(t,r,!1);if(!b(n))return n.get(e)}function v(e,t,r,n){y(r,n,!0).set(e,t)}function m(e,t){var r=[],n=y(e,t,!1);if(b(n))return r;for(var i=function(e){var t=R(e,o);if(!C(t))throw new TypeError;var r=t.call(e);if(!O(r))throw new TypeError;return r}(n.keys()),a=0;;){var s=P(i);if(!s)return r.length=a,r;var u=s.value;try{r[a]=u}catch(e){try{j(i)}finally{throw e}}a++}}function w(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function b(e){return void 0===e}function k(e){return null===e}function O(e){return"object"==typeof e?null!==e:"function"==typeof e}function S(e,t){switch(w(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var r=3===t?"string":5===t?"number":"default",n=R(e,i);if(void 0!==n){var o=n.call(e,r);if(O(o))throw new TypeError;return o}return function(e,t){if("string"===t){var r=e.toString;if(C(r))if(!O(i=r.call(e)))return i;if(C(n=e.valueOf))if(!O(i=n.call(e)))return i}else{var n;if(C(n=e.valueOf))if(!O(i=n.call(e)))return i;var i,o=e.toString;if(C(o))if(!O(i=o.call(e)))return i}throw new TypeError}(e,"default"===r?"number":r)}function T(e){var t=S(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function E(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function C(e){return"function"==typeof e}function x(e){return"function"==typeof e}function R(e,t){var r=e[t];if(null!=r){if(!C(r))throw new TypeError;return r}}function P(e){var t=e.next();return!t.done&&t}function j(e){var t=e.return;t&&t.call(e)}function M(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===l)return t;if(t!==l)return t;var r=e.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return t;var i=n.constructor;return"function"!=typeof i||i===e?t:i}function A(e){return e.__=void 0,delete e.__,e}t("decorate",(function(e,t,r,n){if(b(r)){if(!E(e))throw new TypeError;if(!x(t))throw new TypeError;return function(e,t){for(var r=e.length-1;r>=0;--r){var n=(0,e[r])(t);if(!b(n)&&!k(n)){if(!x(n))throw new TypeError;t=n}}return t}(e,t)}if(!E(e))throw new TypeError;if(!O(t))throw new TypeError;if(!O(n)&&!b(n)&&!k(n))throw new TypeError;return k(n)&&(n=void 0),function(e,t,r,n){for(var i=e.length-1;i>=0;--i){var o=(0,e[i])(t,r,n);if(!b(o)&&!k(o)){if(!O(o))throw new TypeError;n=o}}return n}(e,t,r=T(r),n)})),t("metadata",(function(e,t){return function(r,n){if(!O(r))throw new TypeError;if(!b(n)&&!function(e){switch(w(e)){case 3:case 4:return!0;default:return!1}}(n))throw new TypeError;v(e,t,r,n)}})),t("defineMetadata",(function(e,t,r,n){if(!O(r))throw new TypeError;return b(n)||(n=T(n)),v(e,t,r,n)})),t("hasMetadata",(function(e,t,r){if(!O(t))throw new TypeError;return b(r)||(r=T(r)),function e(t,r,n){if(g(t,r,n))return!0;var i=M(r);return!k(i)&&e(t,i,n)}(e,t,r)})),t("hasOwnMetadata",(function(e,t,r){if(!O(t))throw new TypeError;return b(r)||(r=T(r)),g(e,t,r)})),t("getMetadata",(function(e,t,r){if(!O(t))throw new TypeError;return b(r)||(r=T(r)),function e(t,r,n){if(g(t,r,n))return _(t,r,n);var i=M(r);return k(i)?void 0:e(t,i,n)}(e,t,r)})),t("getOwnMetadata",(function(e,t,r){if(!O(t))throw new TypeError;return b(r)||(r=T(r)),_(e,t,r)})),t("getMetadataKeys",(function(e,t){if(!O(e))throw new TypeError;return b(t)||(t=T(t)),function e(t,r){var n=m(t,r),i=M(t);if(null===i)return n;var o=e(i,r);if(o.length<=0)return n;if(n.length<=0)return o;for(var a=new d,s=[],u=0,c=n;u<c.length;u++){var l=c[u];a.has(l)||(a.add(l),s.push(l))}for(var f=0,h=o;f<h.length;f++){l=h[f];a.has(l)||(a.add(l),s.push(l))}return s}(e,t)})),t("getOwnMetadataKeys",(function(e,t){if(!O(e))throw new TypeError;return b(t)||(t=T(t)),m(e,t)})),t("deleteMetadata",(function(e,t,r){if(!O(t))throw new TypeError;b(r)||(r=T(r));var n=y(t,r,!1);if(b(n))return!1;if(!n.delete(e))return!1;if(n.size>0)return!0;var i=p.get(t);return i.delete(r),i.size>0||p.delete(t),!0}))}(o)}()}(r||(r={}))}).call(this,r(3),r(4))},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=s(h);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function y(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new p(e,t)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";r.r(t);var n,i,o,a,s=r(0),u=function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},c=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};function l(e,t,r,n,i,o,s){if(e&&t.length){e.textBaseline="top";let u=e.measureText(t);const c=u.width,l=u.actualBoundingBoxDescent-u.actualBoundingBoxAscent;s==a.Center?e.fillText(t,r+Math.max((i-c)/2,0),n+(o-l)/2,i):s==a.Left?e.fillText(t,r,n+(o-l)/2,i):s==a.Right&&e.fillText(t,r+i-c,n+(o-l)/2,i)}}function f(e,t,r,n,i,o){let s=n;if(e&&t.length){let n=[],u=[];e.textBaseline="top";let c=0;const l=e.measureText(" ").width,f=e.measureText(t),h=1.5*(f.actualBoundingBoxDescent-f.actualBoundingBoxAscent);t.split("\n").forEach((function(t){u.length=0,c=0,t.split(" ").forEach((function(t){const r=e.measureText(t);c+r.width>i&&(n.push(u.join(" ")),u.length=0,c=0),c+=r.width+l,u.push(t)})),u.length>0&&n.push(u.join(" "))}));for(let t of n){const n=e.measureText(t).width;o==a.Center?e.fillText(t,r+Math.max((i-n)/2,0),s,i):o==a.Left?e.fillText(t,r,s,i):o==a.Right&&e.fillText(t,r+i-n,s,i),s+=h}}return s}!function(e){e.Stratagem="Stratagem",e.PsychicPower="Psychic Power",e.TacticalObjective="Tactical Objective",e.Prayer="Prayer"}(i||(i={})),function(e){e.Classic="Classic",e.Edition_9th="9th Edition"}(o||(o={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center"}(a||(a={}));let h=n=class{constructor(){this._width=n.defaultWidthPx,this._height=n.defaultHeightPx,this._scale=1,this._type=i.Stratagem,this._style=o.Classic,this._heading="Stratagem",this._title="<Title>",this._fluff="<Fluff text>",this._rule="<Rule text>",this._footer="<Footer>",this._value="1"}headerFont(){return this._style==o.Edition_9th?Math.round(16*this._scale).toString()+"px Teko":Math.round(24*this._scale).toString()+"px Teko"}titleFont(){return Math.round(26*this._scale).toString()+"px Teko"}fluffFont(){return"italic "+Math.round(13*this._scale).toString()+"px serif"}ruleFont(){return Math.round(15*this._scale).toString()+"px serif"}footFont(){return Math.round(18*this._scale).toString()+"px Teko"}valueFont(){return Math.round(24*this._scale).toString()+"px Teko"}footerFont(){return Math.round(24*this._scale).toString()+"px Teko"}draw(e,t){let r=e.getContext("2d");if(!r)return;this._width=e.width-2*t,this._height=e.height-2*t,this._scale=Math.max(this._width/n.defaultWidthPx,this._height/n.defaultHeightPx),r.clearRect(0,0,e.width,e.height),r.translate(t,t),r.lineJoin="round",r.strokeStyle="silver",this.roundRect(r,1,1,this._width-2,this._height-2,20,!1,!0);const s=.05*this._width,u=.02*this._height,c=this._width-2*s,h=this._height-2*u,d=Math.ceil(.3*s);let p=12;this._style==o.Edition_9th&&(p=20);const y=this._height/p;this._style==o.Classic&&(r.save(),r.strokeStyle="grey",r.lineWidth=d,this.drawBorder(r,s,u,c,h,y),r.restore());const g=this._heading.toLocaleUpperCase();r.save(),r.font=this.headerFont(),r.textBaseline="top",r.fillStyle="black",l(r,g,s,u,c,y,a.Center),r.restore();let _=2*u+y;const v=2*s,m=this._width-2*s,w=m-v;r.moveTo(v,_),r.lineTo(m,_),r.stroke();const b=this._title.toLocaleUpperCase();r.save(),r.font=this.titleFont(),r.textBaseline="top",r.fillStyle="black",l(r,b,v,_,w,y,a.Center),r.restore(),_+=y,this._style==o.Classic?(r.moveTo(v,_),r.lineTo(m,_),r.stroke(),_+=u):_+=u,this._fluff.length>0&&(r.save(),r.font=this.fluffFont(),r.fillStyle="black",_=f(r,this._fluff,v,_,w,a.Center),r.restore(),_+=y/2),r.moveTo(v,_),r.lineTo(m,_),r.stroke(),_+=y/2,r.save(),r.font=this.ruleFont(),r.fillStyle="black",_=f(r,this._rule,v,_,w,a.Center),r.restore(),_=this._height-1.5*u-y,this._type==i.Stratagem||this._type==i.PsychicPower||this._type==i.TacticalObjective?this._style==o.Classic?this.drawFooterClassic(r,v,m,_,y,w):this._style==o.Edition_9th&&this.drawFooter9th(r,v,m,_,y,w):(this._type,i.Prayer)}toString(){return"Card: "+this._type.toString()+"  Title: "+this._title+"  Rule: "+this._rule+"  CP: "+this._value}roundRect(e,t,r,n,i,o,a,s){e.beginPath(),e.moveTo(t+o,r),e.lineTo(t+n-o,r),e.quadraticCurveTo(t+n,r,t+n,r+o),e.lineTo(t+n,r+i-o),e.quadraticCurveTo(t+n,r+i,t+n-o,r+i),e.lineTo(t+o,r+i),e.quadraticCurveTo(t,r+i,t,r+i-o),e.lineTo(t,r+o),e.quadraticCurveTo(t,r,t+o,r),e.closePath(),a&&e.fill(),s&&e.stroke()}bevelRect(e,t,r,n,i,o,a,s){e.beginPath(),e.moveTo(t,r+o),e.lineTo(t,r+i-o),e.lineTo(t+o,r+i),e.lineTo(t+n-o,r+i),e.lineTo(t+n,r+i-o),e.lineTo(t+n,r+o),e.lineTo(t+n-o,r),e.lineTo(t+o,r),e.closePath(),a&&e.fill(),s&&e.stroke()}drawBorder(e,t,r,n,i,o){this.bevelRect(e,t,r,n,i,o,!1,!0),e.moveTo(t,r+o),e.lineTo(t+n,r+o),e.stroke()}drawFooterClassic(e,t,r,n,o,s){const u=o;e.save(),e.lineWidth=Math.max(Math.ceil(this._scale),1),this.roundRect(e,2*t+u,n,s-2*t-u,o-6,8,!1,!0),e.restore(),e.save(),e.font=this.footFont(),e.textBaseline="top",e.fillStyle="black";let c="COMMAND POINTS";this._type===i.Stratagem?"1"==this._value&&(c="COMMAND POINT"):this._type===i.PsychicPower?c="WARP CHARGE":this._type===i.TacticalObjective&&(c=this._footer),l(e,c,2*t+u,n,s-2*t-u,o-6,a.Center),e.restore(),e.save(),e.fillStyle="#ba2222",e.lineWidth=Math.max(Math.ceil(this._scale),1),this.bevelRect(e,2*t,n-3,u,u,5,!0,!0),e.restore(),e.save(),e.font=this.valueFont(),e.textBaseline="top",e.fillStyle="#f5f2f2",l(e,this._value,2*t,n-3,u,u,a.Center),e.restore()}drawFooter9th(e,t,r,n,o,s){let u="";this._type===i.Stratagem?(u=this._value+" COMMAND POINT","1"!=this._value&&(u+="S")):this._type===i.PsychicPower?u="WARP CHARGE "+this._value:this._type===i.TacticalObjective&&(u=this._footer),u.length>0&&(e.moveTo(t,n),e.lineTo(r,n),e.stroke(),n+=4,e.save(),e.font=this.footFont(),e.textBaseline="top",e.fillStyle="black",l(e,u,t,n,s,o,a.Center),e.restore())}};h.defaultWidthPx=400,h.defaultHeightPx=560,u([Object(s.JsonProperty)(),c("design:type",Number)],h.prototype,"_width",void 0),u([Object(s.JsonProperty)(),c("design:type",Number)],h.prototype,"_height",void 0),u([Object(s.JsonProperty)(),c("design:type",Number)],h.prototype,"_scale",void 0),u([Object(s.JsonProperty)(),c("design:type",String)],h.prototype,"_type",void 0),u([Object(s.JsonProperty)(),c("design:type",String)],h.prototype,"_style",void 0),u([Object(s.JsonProperty)(),c("design:type",String)],h.prototype,"_heading",void 0),u([Object(s.JsonProperty)(),c("design:type",String)],h.prototype,"_title",void 0),u([Object(s.JsonProperty)(),c("design:type",String)],h.prototype,"_fluff",void 0),u([Object(s.JsonProperty)(),c("design:type",String)],h.prototype,"_rule",void 0),u([Object(s.JsonProperty)(),c("design:type",String)],h.prototype,"_footer",void 0),u([Object(s.JsonProperty)(),c("design:type",String)],h.prototype,"_value",void 0),h=n=u([Object(s.Serializable)()],h);var d=r(1);let p=[],y=0;function g(){let e=document.getElementById("preview");e&&p[y]&&p[y].draw(e,0)}function _(e){const t=e.target;t&&p[y]&&(p[y]._heading=t.selectedOptions[0].text,$("#cardheader").val(p[y]._heading),"Stratagem"==t.selectedOptions[0].text?p[y]._type=i.Stratagem:"Psychic Power"==t.selectedOptions[0].text?p[y]._type=i.PsychicPower:"Tactical Objective"==t.selectedOptions[0].text?p[y]._type=i.TacticalObjective:"Prayer"==t.selectedOptions[0].text&&(p[y]._type=i.Prayer),z(),g())}function v(e){const t=e.target;t&&p[y]&&("Classic"==t.selectedOptions[0].text?p[y]._style=o.Classic:"9th Edition"==t.selectedOptions[0].text&&(p[y]._style=o.Edition_9th),z(),g())}function m(e){const t=e.target;t&&p[y]&&(p[y]._heading=t.value,g())}function w(e){const t=e.target;t&&p[y]&&(p[y]._title=t.value,g())}function b(e){const t=e.target;t&&p[y]&&(p[y]._rule=t.value,g())}function k(e){const t=e.target;t&&p[y]&&(p[y]._fluff=t.value,g())}function O(e){const t=e.target;t&&p[y]&&(p[y]._value=t.value,g())}function S(e){const t=e.target;t&&p[y]&&(p[y]._footer=t.value,g())}function T(){y=Math.max(y-1,0),z(),g()}function E(){y=Math.min(y+1,p.length-1),z(),g()}function C(e){return e/25.4}function x(){if(p[y]){const e=[63,88];let t=300,r=0;const n=document.getElementById("outputdpi");n&&(t=parseInt(n.value));const i=document.getElementById("outputmargin");i&&(r=parseInt(i.value));let o=Math.ceil(C(r)*t),a=document.createElement("canvas");a.width=Math.round(C(e[0])*t)+2*o,a.height=Math.round(C(e[1])*t)+2*o,p[y].draw(a,o);let s=document.createElement("a");s.download="stratagem.png",s.href=a.toDataURL("image/png"),s.click(),console.log("Current card: "+y+" Num active cards: "+p.length),z(),g()}}function R(e){const t=e.split(".");return t.length>1?t[t.length-1].toLowerCase():""}function P(e){return"CLASSIC"==e?o.Classic:o.Edition_9th}function j(e){const t=e.target.files;let r=o.Edition_9th;if(t){y=0,p.length=0;for(let e of t){const t=R(e.name);if("csv"===t||"tsv"===t){Object(d.parse)(e,{complete:e=>{for(let t of e.data){let e=t,n=i.Stratagem;if("STRATAGEM"==e[0].toUpperCase())n=i.Stratagem;else if("PSYCHIC POWER"===e[0].toUpperCase())n=i.PsychicPower;else if("TACTICAL OBJECTIVE"===e[0].toUpperCase())n=i.TacticalObjective;else{if("PRAYER"!==e[0].toUpperCase())continue;n=i.Prayer}if(n==i.Prayer){let t=1,i=new h;i._type=n,i._value="",5==e.length?i._style=r:6==e.length&&(i._style=P(e[t++])),i._title=e[t++],i._heading=e[t++],i._fluff=e[t++],i._rule=e[t++],p.push(i)}else if(n==i.TacticalObjective){let t=1,i=new h;i._type=n,5==e.length?i._style=r:e.length>=6&&(i._style=P(e[t++])),i._title=e[t++],i._heading=e[t++],i._fluff=e[t++],i._rule=e[t++],7==e.length?i._footer=e[t++]:i._footer="OBJECTIVE",p.push(i)}else{let t=1,i=new h;i._type=n,6==e.length?i._style=r:7==e.length&&(i._style=P(e[t++])),i._value=e[t++],i._title=e[t++],i._heading=e[t++],i._fluff=e[t++],i._rule=e[t++],p.push(i)}}y=0,console.log("Num active cards: "+p.length),z(),g()}})}else $("#errorText").html("StrataGen only supports .csv files.  Selected file is a '"+t+"' file."),$("#errorDialog").modal()}}}function M(){localStorage.setItem("lastCard",JSON.stringify(Object(s.serialize)(p[y])))}function A(){let e=localStorage.getItem("lastCard");e?(p[y]=Object(s.deserialize)(JSON.parse(e),h),z(),g()):console.log("Card not loaded.")}function I(e){const t=e.target.files;t&&t[0]}function D(e){const t=e.target;t&&t.value}function L(e){const t=e.target;t&&t.value}function z(){p[y]&&($("#cardtype").val(p[y]._type.toString()),$("#cardstyle").val(p[y]._style.toString()),$("#cardheader").val(p[y]._heading),$("#cardtitle").val(p[y]._title),$("#cardrule").val(p[y]._rule),$("#cardfluff").val(p[y]._fluff),$("#cardfooter").val(p[y]._footer),$("#cardfootercontrol").hide(),p[y]._type===i.Stratagem?($("#cardvalue").attr({min:1,max:3}),parseInt(p[y]._value)>3?p[y]._value="3":parseInt(p[y]._value)<1&&(p[y]._value="1"),$("#cardvaluelabel").html("Command Points"),$("#cardvaluecontrol").show()):p[y]._type===i.PsychicPower?($("#cardvalue").attr({min:2,max:12}),parseInt(p[y]._value)>12?p[y]._value="12":parseInt(p[y]._value)<2&&(p[y]._value="2"),$("#cardvaluelabel").html("Warp Charge"),$("#cardvaluecontrol").show()):p[y]._type===i.TacticalObjective?p[y]._style==o.Classic?($("#cardvalue").attr({min:11,max:66}),parseInt(p[y]._value)>66?p[y]._value="66":parseInt(p[y]._value)<11&&(p[y]._value="11"),$("#cardvaluelabel").html("Objective (D66)"),$("#cardvaluecontrol").show()):p[y]._style==o.Edition_9th&&($("#cardvaluecontrol").hide(),$("#cardfootercontrol").show()):p[y]._type===i.Prayer&&$("#cardvaluecontrol").hide(),$("#cardvalue").val(p[y]._value))}console.log("Reloading web page.");let F=document.getElementById("preview");if(F){F.getContext("2d")&&0==p.length&&(y=0,p[y]=new h)}$("#previouscard").click(T),$("#nextcard").click(E),$("#cardtype").on("change",_),$("#cardstyle").on("change",v),$("#cardheader").on("input",m),$("#cardtitle").on("input",w),$("#cardrule").on("input",b),$("#cardfluff").on("input",k),$("#cardvalue").on("input",O),$("#cardfooter").on("input",S),$("#createcard").click(x),$("#datacardfile").on("change",j),$("#backgroundfile").on("change",I),$("#bgopacity").on("input",D),$("#bgsaturation").on("input",L),$("#savecard").click(M),$("#loadcard").click(A),z(),g(),console.log("Started...")}]);